generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id              String          @id @default(cuid())
  username        String
  email           String          @unique
  password        String?
  tgAccount       String?
  whatsappAccount String?
  evmAddress      String?
  solanaAddress   String?
  role            String          @default("user")
  status          String          @default("pending") // pending, active, suspended
  isApproved      Boolean         @default(false) // 管理员审核状态
  approvedBy      String?         // 审核管理员ID
  approvedAt      DateTime?       // 审核时间
  reimbursements  Reimbursement[]
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
}

model Reimbursement {
  id                   String   @id @default(cuid())
  applicantId          String
  title                String
  description          String?
  amountOriginal       Float
  currency             String
  exchangeRateToUsd    Float
  amountUsdEquivalent  Float
  exchangeRateSource   String
  exchangeRateTime     DateTime
  isManualRate         Boolean  @default(false)
  convertedBy          String?
  chain                String
  receiptUrl           String?
  status               String   @default("submitted")
  reviewerId           String?
  approverId           String?
  txHash               String?
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  applicant            User     @relation(fields: [applicantId], references: [id])
}
