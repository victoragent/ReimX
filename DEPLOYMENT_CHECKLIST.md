# ReimX 部署检查清单

## ✅ 部署前检查

### 代码准备
- [ ] 代码已推送到 GitHub 仓库
- [ ] 所有功能测试通过 (`pnpm test`)
- [ ] 代码 lint 检查通过 (`pnpm lint`)
- [ ] 构建测试通过 (`pnpm build`)

### 环境配置
- [ ] PostgreSQL 数据库已创建 (Neon.tech/Supabase)
- [ ] Resend 邮件服务已配置
- [ ] Telegram Bot 已创建 (可选)
- [ ] 区块链 RPC 端点已配置 (可选)

### 安全配置
- [ ] 生成强随机 NEXTAUTH_SECRET
- [ ] 配置强密码策略
- [ ] 准备 SSL 证书 (Vercel 自动处理)

## 🚀 部署过程

### Vercel 配置
- [ ] 在 Vercel 创建新项目
- [ ] 连接 GitHub 仓库
- [ ] 配置构建设置:
  - [ ] Framework: Next.js
  - [ ] Build Command: `pnpm build`
  - [ ] Output Directory: `.next`
  - [ ] Install Command: `pnpm install`

### 环境变量设置
- [ ] `DATABASE_URL` - PostgreSQL 连接字符串
- [ ] `NEXTAUTH_SECRET` - 强随机密钥
- [ ] `NEXTAUTH_URL` - 生产环境域名
- [ ] `RESEND_API_KEY` - Resend API Key
- [ ] `ADMIN_EMAIL` - 管理员邮箱
- [ ] `JWT_SECRET` - JWT 密钥
- [ ] `ETHEREUM_RPC_URL` - Ethereum RPC (可选)
- [ ] `SOLANA_RPC_URL` - Solana RPC (可选)
- [ ] `TELEGRAM_BOT_TOKEN` - Telegram Bot Token (可选)

### 数据库初始化
- [ ] 执行数据库迁移: `pnpm db:migrate`
- [ ] 验证数据库表结构
- [ ] 创建初始管理员账户

## 🧪 部署后验证

### 功能测试
- [ ] 主页可正常访问
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 报销提交功能正常
- [ ] 管理员功能正常
- [ ] 邮件通知功能正常
- [ ] 汇率查询功能正常

### 性能测试
- [ ] 页面加载时间正常
- [ ] API 响应时间正常
- [ ] 数据库查询性能正常

### 安全测试
- [ ] HTTPS 强制启用
- [ ] 敏感信息未暴露
- [ ] 认证机制正常工作
- [ ] 权限控制正常

## 📊 监控配置

### Vercel Analytics
- [ ] 启用 Vercel Analytics
- [ ] 配置性能监控
- [ ] 设置错误追踪

### 数据库监控
- [ ] 配置数据库性能监控
- [ ] 设置慢查询告警
- [ ] 监控连接数

### 应用监控
- [ ] 配置日志收集
- [ ] 设置错误告警
- [ ] 监控 API 使用量

## 🔄 持续集成

### GitHub Actions (可选)
- [ ] 配置自动化测试
- [ ] 设置自动部署到预览环境
- [ ] 配置代码质量检查

### Vercel Preview
- [ ] 验证预览环境功能
- [ ] 测试分支部署
- [ ] 配置环境变量分离

## 🛡️ 安全加固

### 应用安全
- [ ] 启用 CSP 头
- [ ] 配置安全头
- [ ] 设置速率限制
- [ ] 启用 Bot 保护

### 数据安全
- [ ] 配置数据库备份
- [ ] 设置数据加密
- [ ] 定期轮换密钥
- [ ] 监控异常访问

### 访问控制
- [ ] 配置管理员权限
- [ ] 设置用户角色
- [ ] 监控登录尝试
- [ ] 实现会话管理

## 📋 维护计划

### 日常维护
- [ ] 监控系统状态
- [ ] 检查日志文件
- [ ] 验证备份完整性
- [ ] 更新依赖包

### 定期任务
- [ ] 每月安全扫描
- [ ] 季度性能优化
- [ ] 半年数据清理
- [ ] 年度架构评审

## 🆘 紧急响应

### 故障处理
- [ ] 建立故障响应流程
- [ ] 准备回滚方案
- [ ] 配置监控告警
- [ ] 准备应急联系方式

### 数据恢复
- [ ] 测试备份恢复流程
- [ ] 准备灾难恢复计划
- [ ] 配置多点备份

---

**检查清单状态**: 📝 持续更新  
**最后验证**: 2025年10月22日  
**负责人**: 部署团队
